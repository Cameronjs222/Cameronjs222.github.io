<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cameron Shaffer Portfolio.</title>
    <link rel="stylesheet" href="newStyle.css">
</head>
<body id="body">
    <div class="deployedProjects headShot">
        <div class="nav reflectiveElement">
            <a href="">
                <div class="navItem">
                    <span class="navItemText reflective">Bio</span>
                </div>
            </a>
            <a href="#congressOnPalestine">
                <div class="navItem">
                    <span class="navItemText reflective">Projects</span>
                </div>
            </a>
            <a href="">
                <div class="navItem">
                    <span class="navItemText reflective">Contact</span>
                </div>
            </a>
            
        </div>
        <div class="photoAndName">
            
            <div class="photo">
                <img src="./img/IMG_2882.jpg" alt="Cameron Shaffer headshot" class="img reflectiveElement" id="myFace">
            </div>
            <div class="shortDescription">
                <h2 class="reflective" id="myName">Cameron Shaffer</h2>
                <h2 class="reflective">Full-Stack developer</h2>
                <h2 class="reflective">Java, Javascript, python</h2>
            </div>
        </div>
        <div></div>
        <div></div>
        <div class="container">
            testing
            
        </div>
    <div class="mouse">
        
    </div>
    
    
    
                <!-- <div class="mouse">
                    
                </div> -->
                <h2 style="display: none; margin: auto; position: absolute; color: rgb(7.5%,0%,14.9%); top: 100%; left: 50%; opacity: .5;" id="hiddenMessage">
                    Embrace the void...
                    <!--  -->
                </h2>


</body>
<script>
let screenHeight = document.body.clientHeight;
let called = false;
let nameWidth = document.getElementById('myName').offsetWidth;
document.getElementById('myFace').style.width = nameWidth + 'px';

function checkScrollHeight() {
    if (document.documentElement.scrollHeight > screenHeight * 2.5 && !called) {
        let hiddenMessage = document.getElementById('hiddenMessage')
        hiddenMessage.style.top = screenHeight * 2 + 'px';
        hiddenMessage.style.display = 'block';
        called = true;
        setTimeout(() => {
            hiddenMessage.style.opacity = 0;
            hiddenMessage.style.transition = 'opacity 1s';
        }, 1000);
    }
}

// Attach the event listener to the window's scroll event
window.addEventListener('scroll', checkScrollHeight);


    function splitText(myClass) {
        const elements = document.getElementsByClassName(myClass);
        const elementsArray = Array.from(elements); // Convert HTMLCollection to array        

        // elementsArray.map((div, index) => {
        //     let modifiedWrapper = `<div class='reflectiveWrapper' id='wrapper${index}'>${div.innerHTML}</div>`;
        //     div.outerHTML = modifiedWrapper;
        // }
        // );

        elementsArray.forEach((element, index) => {
            const text = element.textContent;
            const modifiedText = text.split('').map(letter => `<span class='reflectiveElement'>${letter}</span>`).join('');
            element.innerHTML = modifiedText;
        });
    }

    function mouseTracker() {
        const mouse = document.querySelector('.mouse');
        document.addEventListener('mousemove', (e) => {
            setTimeout(() => {
                divWidth = mouse.offsetWidth;
                divHeight = mouse.offsetHeight;
                let adjustedXValue = e.pageX - (divWidth / 2);
                let adjustedYValue = e.pageY - (divHeight / 2);
                mouse.style.left = adjustedXValue + 'px';
                mouse.style.top = adjustedYValue + 'px';
            }, 150);            
        })
        document.addEventListener('scroll', (e) => {
        })
    }


    function preHoverEffect(itemClassName){
        const mouse = document.querySelector('.mouse');
        const items = document.getElementsByClassName(itemClassName);
        const mouseWidth = mouse.offsetWidth;
        const mouseHeight = mouse.offsetHeight;
        const mouseRadius = Math.sqrt((mouseWidth / 2) ** 2 + (mouseHeight / 2) ** 2) * .75;

        const handleMouseMove = (e) => {
            const mouseX = e.pageX;
            const mouseY = e.pageY;

            Array.from(items).forEach((item, index) => {
                const itemCenterX = item.offsetLeft + item.offsetWidth / 2;
                const itemCenterY = item.offsetTop + item.offsetHeight / 2;
                const distance = Math.sqrt((mouseX - itemCenterX) ** 2 + (mouseY - itemCenterY) ** 2);

                if (distance <= mouseRadius) {
                    const intensity = Math.max(190, 255 - Math.floor((distance  / mouseRadius ) * 255));
                    item.style.color = `rgb(${intensity}, ${intensity}, ${intensity})`;
                }
                else {
                    item.style.color = 'rgb(180,180,180)';
                }
            }
        )}
        document.addEventListener('mousemove', handleMouseMove);
    };



document.addEventListener('mousemove', mouseTracker())
preHoverEffect('reflectiveElement');
splitText('reflective')
</script>
<script src="app.js"></script>
</html>

<!-- TODO: 
    - fade out highlihgt when mouse stops moving
    - set highlihgt to change opacity
    - set to check if mouse is close to box of text before checking if contents are close to mouse -->
